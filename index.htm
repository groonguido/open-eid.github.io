<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Architecture of ID-software</title>
</head>

<body>
<blockquote>
  <h1 align="left">Architecture of ID-software</h1>
  <p align="left">Document version 0.5<br>
    Software version 3.11<br>
  Last updated: 01.07.2015</p>
  <p>&nbsp;</p>
  <h2><strong>Table of contents</strong><br>
  </h2>
</blockquote>
<ul>
  <li><a href="#_Toc423563523">Introduction</a> </li>
  <li><a href="#_Toc423563524">Background</a> </li>
  <li><a href="#_Toc423563525">Component  model</a> 
    <ul>
      <li><a href="#_Toc423563526">	Desktop  applications</a> </li>
      <li><a href="#_Toc423563527">Software  libraries</a> </li>
      <li><a href="#_Toc423563528">Web  components</a> </li>
      <li><a href="#_Toc423563529">Drivers</a> </li>
      <li><a href="#_Toc423563530">Updating  mechanisms</a> </li>
      <li><a href="#_Toc423563531">External  services&rsquo; interfaces</a> </li>
    </ul>
  </li>
  <li><a href="#_Toc423563532">Deployment  model</a> 
    <ul>
      <li><a href="#_Toc423563533">Signing  in web browser</a> </li>
      <li><a href="#_Toc423563534">Signing  with DigiDoc3 Client</a>  </li>
    </ul>
  </li>
</ul>
<blockquote>
  <p>&nbsp;</p>
  <p><a name="_Toc398635094"></a><a name="_Toc398633392"></a><a name="_Toc398590568"></a><a name="_Toc387845381"></a><a name="_Toc387768421">&nbsp;</a></p>
  <h1><a name="_Toc423563523"></a><a name="_Ref399144862">Introduction</a></h1>
  <p>The purpose of this document is to describe the  architecture of ID-software. <br>
    ID-software is a collection of software components  offering support for PKI-based functionality, i.e. operations with different  cryptographic tokens (e.g. eID cards), handling digitally signed documents,  file encryption/decryption and signing and authentication in web environment.  The ID-software comprises end-user applications, software libraries, web  components, drivers for communicating with the cryptographic tokens and other  complementary components.<br>
    This document covers description of  ID-software and its components, their deployment in different environments, provided  and required interfaces. The document does not include components that have  reached the end of their support nor the components that have not yet been  released. <br>
    The document is based on the latest released  state of the ID-software components. At the time of writing, the latest  released version of ID-software is <strong>version  3.11</strong>. Latest version numbers of the various ID-software components are  provided at <a href="http://www.id.ee/?lang=en&id=36798">http://www.id.ee/?lang=en&amp;id=36798</a>. <br>
    The document is targeted for: </p>
  <ul>
    <li>Owners/managers of the  software;</li>
    <li>Contractors;</li>
    <li>Contributors interested in  developing ad-hoc solutions;</li>
    <li>Integrators/software developers  interested in integrating the software with third-party information systems;</li>
    <li>International audience –  contributors/integrators from countries other than Estonia who wish to use the  software internationally and/or contribute in its development. </li>
  </ul>
  <p><br clear="all">
  </p>
  <p><a name="_Toc398635095"></a><a name="_Toc398633393"></a><a name="_Toc398590569"></a><a name="_Toc387845382"></a><a name="_Toc387768422"><strong>&nbsp;</strong></a></p>
  <h1><a name="_Toc423563524">Background</a></h1>
  <p>The main owner/manager of the ID-software is  Estonian Information System Authority (RIA, <a href="https://www.ria.ee/en/">https://www.ria.ee/en/</a>). <br>
    Main contractor for developing the software  is AS Sertifitseerimiskeskus (SK, <a href="https://sk.ee/en">https://sk.ee/en</a>).  In case of a few of the components, SK is also the owner.<br>
    Development of ID-software has been mainly  done in Estonia, however, the ID-software is released for international usage.<br>
    The software is distributed open-source (mainly  under LGPL/BSD licence) and is accessible from the following locations:</p>
  <ul>
    <li>GitHub repository for the  source code and beta versions of binary packages: <a href="https://github.com/open-eid">https://github.com/open-eid</a>. </li>
    <li>Release repository for binaries: <a href="https://installer.id.ee/">https://installer.id.ee/</a></li>
  </ul>
  <p>ID-software components can be logically  divided in the following groups:</p>
  <ul>
    <li><strong>Desktop applications</strong> for end-users;</li>
    <li><strong>Software libraries</strong> for  integrators/software developers to integrate the libraries&rsquo; functionality with third-party  information systems/applications;</li>
    <li><strong>Web components</strong> for integrators/software  developers to add the signature creation and authentication functionality in  web environment to third-party web applications; </li>
    <li><strong>Drivers</strong> for communication with the cryptographic  tokens that conduct the PKI operations;</li>
    <li><strong>Other (supportive) components</strong> for  packaging, installation, updating and version-control of the software.</li>
  </ul>
  <p>The following table maps the ID-software components,  their owner/developer (i.e. the main contractor) and the functionality they  offer.<br>
    Table 1. Mapping of ID-software components and functions</p>
</blockquote>
<table border="1" cellspacing="0" cellpadding="0" width="101%">
  <tr>
    <td width="5%" rowspan="2"><p align="center"><strong>&nbsp;</strong></p></td>
    <td width="14%" rowspan="2"><p align="center"><strong>Component</strong></p></td>
    <td width="60%" colspan="5" valign="top"><p align="center"><strong>Function</strong></p></td>
    <td width="10%" rowspan="2"><p align="center"><strong>Owner/</strong><br>
      <strong>Developer </strong></p></td>
    <td width="8%" rowspan="2"><p align="center"><strong>Licence</strong></p></td>
  </tr>
  <tr>
    <td width="10%"><p align="center"><strong>Handling DDOC/ BDOC documents</strong></p></td>
    <td width="12%"><p align="center"><strong>Handling CDOC documents</strong></p></td>
    <td width="12%"><p align="center"><strong>Calculating RSA signature</strong></p></td>
    <td width="12%"><p align="center"><strong>Card management operations</strong></p></td>
    <td width="14%"><p align="center"><strong>Authentication</strong></p></td>
  </tr>
  <tr>
    <td width="5%" rowspan="2"><p align="center">Desktop applications</p></td>
    <td width="14%"><p align="center"><strong>DigiDoc3 Client</strong></p></td>
    <td width="10%"><p align="center">+*</p></td>
    <td width="12%"><p align="center">+</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">-</p></td>
    <td width="10%"><p align="center">RIA/SK</p></td>
    <td width="8%"><p align="center">LGPL</p></td>
  </tr>
  <tr>
    <td width="14%"><p align="center"><strong>ID-card utility</strong></p></td>
    <td width="10%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">- </p></td>
    <td width="12%"><p align="center">  +* </p></td>
    <td width="14%"><p align="center">-</p></td>
    <td width="10%"><p align="center">RIA/SK</p></td>
    <td width="8%"><p align="center">LGPL</p></td>
  </tr>
  <tr>
    <td width="5%" rowspan="5"><p align="center">Software libraries</p></td>
    <td width="14%"><p align="center"><strong>JDigiDoc (Java)</strong></p></td>
    <td width="10%"><p align="center">+</p></td>
    <td width="12%"><p align="center">+</p></td>
    <td width="12%"><p align="center">+*</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">-</p></td>
    <td width="10%"><p align="center">RIA/SK</p></td>
    <td width="8%"><p align="center">LGPL</p></td>
  </tr>
  <tr>
    <td width="14%"><p align="center"><strong>DigiDoc4j (Java)</strong></p></td>
    <td width="10%"><p align="center">+</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">+*</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">-</p></td>
    <td width="10%"><p align="center">RIA/SK</p></td>
    <td width="8%"><p align="center">LGPL</p></td>
  </tr>
  <tr>
    <td width="14%"><p align="center"><strong>Libdigidocpp (C++)</strong></p></td>
    <td width="10%"><p align="center">+</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">+*</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">-</p></td>
    <td width="10%"><p align="center">RIA/SK</p></td>
    <td width="8%"><p align="center">LGPL</p></td>
  </tr>
  <tr>
    <td width="14%"><p align="center"><strong>CDigiDoc (C)</strong></p></td>
    <td width="10%"><p align="center">+</p></td>
    <td width="12%"><p align="center">+</p></td>
    <td width="12%"><p align="center">+*</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">-</p></td>
    <td width="10%"><p align="center">RIA/SK</p></td>
    <td width="8%"><p align="center">LGPL</p></td>
  </tr>
  <tr>
    <td width="14%"><p align="center"><strong>NDigiDoc (.NET)</strong></p></td>
    <td width="10%"><p align="center">-</p></td>
    <td width="12%"><p align="center">+</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">-</p></td>
    <td width="10%"><p align="center">SK/SK</p></td>
    <td width="8%"><p align="center">BSD3</p></td>
  </tr>
  <tr>
    <td width="5%" rowspan="3"><p align="center">Web components</p></td>
    <td width="14%"><p align="center"><strong>Browser signing modules</strong></p></td>
    <td width="10%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">+*</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">-</p></td>
    <td width="10%"><p align="center">RIA/SK</p></td>
    <td width="8%"><p align="center">LGPL</p></td>
  </tr>
  <tr>
    <td width="14%"><p align="center"><strong>hwcrypto.js (JavaScript)</strong></p></td>
    <td width="10%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">+*</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">-</p></td>
    <td width="10%"><p align="center">RIA/SK</p></td>
    <td width="8%"><p align="center">MIT</p></td>
  </tr>
  <tr>
    <td width="14%"><p align="center"><strong>pkcs11-module-loader</strong></p></td>
    <td width="10%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">+**</p></td>
    <td width="10%"><p align="center">RIA/SK</p></td>
    <td width="8%"><p align="center">LGPL</p></td>
  </tr>
  <tr>
    <td width="5%" rowspan="4"><p align="center">Driver components</p></td>
    <td width="14%"><p align="center"><strong>Minidriver</strong></p></td>
    <td width="10%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">+*</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">+*</p></td>
    <td width="10%"><p align="center">RIA/SK </p></td>
    <td width="8%"><p align="center">LGPL/BSD3</p></td>
  </tr>
  <tr>
    <td width="14%"><p align="center"><strong>EstEID-pkcs11</strong></p></td>
    <td width="10%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">+*</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">+*</p></td>
    <td width="10%"><p align="center">RIA/SK </p></td>
    <td width="8%"><p align="center">-</p></td>
  </tr>
  <tr>
    <td width="14%"><p align="center"><strong>EstEID-tokend</strong></p></td>
    <td width="10%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">+*</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="14%"><p align="center">+*</p></td>
    <td width="10%"><p align="center">RIA/SK </p></td>
    <td width="8%"><p align="center">APSL / LGPL</p></td>
  </tr>
  <tr>
    <td width="14%"><p align="center"><strong>Smartcardpp </strong></p></td>
    <td width="10%"><p align="center">-</p></td>
    <td width="12%"><p align="center">-</p></td>
    <td width="12%"><p align="center">+*</p></td>
    <td width="12%"><p align="center">+*</p></td>
    <td width="14%"><p align="center">+*</p></td>
    <td width="10%"><p align="center">RIA/SK </p></td>
    <td width="8%"><p align="center">LGPL/BSD3</p></td>
  </tr>
</table>
<blockquote>
  <p>* - The functionality is provided via base components<br>
    ** - The component is used only once for  setting the proper parameters for authentication in Firefox browser.<br>
    <a name="_Toc398635097"></a><a name="_Toc398633395"></a><a name="_Toc398590571"></a><a name="_Toc387845383"></a><a name="_Toc387768423">The main functions offered by ID-software are described in the  following table.</a><br>
    Table 2. Functions offered by ID-software<strong></strong></p>
</blockquote>
<table border="1" cellspacing="0" cellpadding="0" width="94%">
  <tr>
    <td width="142"><br>
      <strong>Function</strong></td>
    <td width="463"><p align="center"><strong>Description</strong></p></td>
  </tr>
  <tr>
    <td width="142"><p align="left">Handling DDOC/BDOC documents</p></td>
    <td width="463"><p>Handling documents in <a href="http://id.ee/public/bdoc-spec212-eng.pdf">BDOC 2.1 </a> (XAdES/ASiC-E) and <a href="http://id.ee/public/DigiDoc_format_1.3.pdf">DIGIDOC-XML    1.3 (DDOC) </a> digital    signature formats that are profiles of <a href="http://www.etsi.org/deliver/etsi_ts/101900_101999/101903/01.04.02_60/ts_101903v010402p.pdf">ETSI XAdES </a> (XML    Advanced Electronic Signature) format. <br>
      More information on the formats&rsquo; life cycle can be    found from <a href="http://www.id.ee/?lang=en&id=34336">http://www.id.ee/?lang=en&amp;id=34336 </a>. </p></td>
  </tr>
  <tr>
    <td width="142"><p align="left">Calculating RSA signature</p></td>
    <td width="463"><p>Calculating    the RSA signature value in browser or desktop/server environment. The    operation involves connecting with the signature token&rsquo;s driver, sending the    data to be signed and receiving digital signature value calculated with the    token owner&rsquo;s RSA private key.<br>
      The    following cryptographic tokens are supported: </p>
      <ol start="1" type="1">
        <li>Hardware-based         tokens (e.g. PKCS#11-based eID cards, USB cryptostick and Mobile-ID)</li>
        <li>Software-based         tokens (e.g. PKCS#12 software token)</li>
      </ol></td>
  </tr>
  <tr>
    <td width="142"><p align="left">Handling CDOC documents</p></td>
    <td width="463"><p>Encrypting and decrypting documents in <a href="http://id.ee/public/SK-CDOC-1.0-20120625_EN.pdf">ENCDOC-XML    1.0 (CDOC) </a> format. </p></td>
  </tr>
  <tr>
    <td width="142"><p align="left">Card management operations</p></td>
    <td width="463"><p>Renewal of the certificates on the card, PIN/PUK    management, reading personal data file. </p></td>
  </tr>
  <tr>
    <td width="142"><p align="left">Authentication</p></td>
    <td width="463"><p>Authentication with ID-card. The operation is    generally done via native operating system/browser components. In case of    Estonian ID-cards and Firefox browser, a PKCS#11 module loader script is used    for setting the proper parameters for authentication in Firefox browser.<br>
    </p></td>
  </tr>
</table>
<blockquote>
  <p><br clear="all">
  </p>
  <h1><a name="_Toc423563525"></a><a name="_Ref399097693"></a><a name="_Ref399097682"></a><a name="_Component_model"></a>Component model </h1>
  <p>The following chapter depicts ID-software  component diagrams, including variations of the components used in different  supported environments. <br>
    In the context of the component diagrams in this  document, the ID-software components have been divided to three different packages  to show the component&rsquo;s owner/developer:</p>
  <ul>
    <li>Components of ID-software that  are owned by RIA and developed by SK: <u>placed in &ldquo;RIA/SK&rdquo; package</u>;</li>
    <li>Components of ID-software that  are owned and operated by RIA: <u>placed in &ldquo;RIA&rdquo; package;</u></li>
    <li>Components of ID-software that  are owned and developed by SK: <u>placed in &ldquo;SK&rdquo; package.</u></li>
  </ul>
  <p>Other components are regarded as external to  ID-software. <br>
    Note that not all of the external base  libraries are included in the component model to avoid duplicity with other  documentation – the base libraries are listed and described in the  documentation of the respective ID-software components and can be accessed via  the references provided.</p>
  <h2><a name="_Toc423563526"></a><a name="_Toc398635098"></a><a name="_Toc398633396"></a><a name="_Toc398590572"></a><a name="_Toc387845384"></a><a name="_Desktop_applications"></a>Desktop applications </h2>
  <h3><a name="_Ref399109841"></a><a name="_DigiDoc3_Client"></a>DigiDoc3 Client </h3>
  <p>  <img src="index_files/comp_client.png" width="643" height="602"><br>
    Figure 1. Components of DigiDoc3 Client</p>
  <p>Table 3. Components of DigiDoc3 Client</p>
</blockquote>
<table border="1" cellspacing="0" cellpadding="0" width="99%">
  <tr>
    <td width="20%"><br>
      <strong>Component</strong></td>
    <td width="68%"><p align="center"><strong>Description</strong></p></td>
    <td width="10%"><p align="center"><strong>Owner/</strong><br>
      <strong>Developer</strong></p></td>
  </tr>
  <tr>
    <td width="20%"><p align="center"><strong>DigiDoc3 Client</strong></p></td>
    <td width="68%"><p> End-user desktop applications that own a    common GUI. DigiDoc3 Client enables handling digitally signed documents.    DigiDoc3 Crypto subcomponent enables file encryption/decryption. <br>
      Wiki: <a href="https://github.com/open-eid/qdigidoc/wiki">https://github.com/open-eid/qdigidoc/wiki</a> <br>
      Code    repository: <a href="https://github.com/open-eid/qdigidoc">https://github.com/open-eid/qdigidoc</a></p></td>
    <td width="10%"><p>RIA/SK</p></td>
  </tr>
  <tr>
    <td width="20%"><p align="center"><strong>DigiDoc3 Client base libraries</strong></p></td>
    <td width="68%"><p> Libdigidocpp (and its base libraries,    including CDigiDoc), etc. See <a href="#_ID-card_utility_interfaces">ID-card    utility interfaces</a></p></td>
    <td width="10%"><p> -</p></td>
  </tr>
  <tr>
    <td width="20%"><p align="center"><strong>Error reports repository</strong></p></td>
    <td width="68%"><p> Repository where the DigiDoc3 Client    application&rsquo;s and ID-card utility program&rsquo;s error reports (generated with    BreakPad base library) are sent.</p></td>
    <td width="10%"><p>RIA</p></td>
  </tr>
  <tr>
    <td width="20%"><p align="center"><strong>Kill switch</strong></p></td>
    <td width="68%"><p> Service for centrally managing DigiDoc3    Client application&rsquo;s life cycle. The application periodically connects with    the service to check if the application&rsquo;s version is still supported. If not,    then the application cannot be used any longer and a newer version must be    installed.</p></td>
    <td width="10%"><p>RIA</p></td>
  </tr>
  <tr>
    <td width="20%"><p align="center"><strong>DigiDocService web service</strong></p></td>
    <td width="68%"><p> SOAP-based web service that is used by    DigiDoc3 Client for signature creation with Mobile-ID. See also <a href="http://www.sk.ee/upload/files/DigiDocService_spec_eng.pdf">http://www.sk.ee/upload/files/DigiDocService_spec_eng.pdf</a>.</p></td>
    <td width="10%"><p>SK/SK</p></td>
  </tr>
  <tr>
    <td width="20%"><p align="center"><strong>LDAP directory</strong></p></td>
    <td width="68%"><p> Directory of active certificates issued by    SK (as the CA in Estonia). The directory is used by DigiDoc3 Crypto    subcomponent for finding authentication certificate (and the respective    public key) of the recipient of the encrypted document. See also <a href="https://sk.ee/en/repository/ldap/ldap-kataloogi-kasutamine/">https://sk.ee/en/repository/ldap/ldap-kataloogi-kasutamine/</a><br>
    </p></td>
    <td width="10%"><p>SK/SK</p></td>
  </tr>
  <tr>
    <td width="20%"><p align="center"><strong>TSL repository</strong></p></td>
    <td width="68%"><p>Repository    for accessing the TSL (<a href="http://www.etsi.org/deliver/etsi_ts/119600_119699/119612/01.02.01_60/ts_119612v010201p.pdf">Trust    Service status List</a>) lists that can be used as a central source of trust    anchor information during digital signature creation and validation    processes. <br>
      The    European Commission&rsquo;s TSL list (<a href="https://ec.europa.eu/information_society/policy/esignature/trusted-list/tl-mp.xml">https://ec.europa.eu/information_society/policy/esignature/trusted-list/tl-mp.xml</a>)    is used as the central TSL list (with references to national lists). </p></td>
    <td width="10%"><p>-</p></td>
  </tr>
  <tr>
    <td width="20%"><p align="center"><strong>OCSP service</strong></p></td>
    <td width="68%"><p><a href="https://tools.ietf.org/html/rfc6960">RFC6960</a> based OCSP service.    Also offered by SK for Estonian and a number of foreign certificates (see <a href="http://www.sk.ee/">www.sk.ee</a>).</p></td>
    <td width="10%"><p>-</p></td>
  </tr>
  <tr>
    <td width="20%"><p align="center"><strong>Libdigidocpp</strong></p></td>
    <td width="68%"><p> Described in chap. <a href="#_Software_libraries">Software libraries</a></p></td>
    <td width="10%"><p>RIA/SK</p></td>
  </tr>
  <tr>
    <td width="20%"><p align="center"><strong>CDigiDoc</strong></p></td>
    <td width="68%"><p> Described in chap. <a href="#_Software_libraries">Software libraries</a></p></td>
    <td width="10%"><p>RIA/SK</p></td>
  </tr>
  <tr>
    <td width="20%"><p align="center"><strong>Minidriver</strong></p></td>
    <td width="68%"><p> Used via CNG interface in Windows    environment only. Described in chap. <a href="#_Drivers">Drivers</a></p></td>
    <td width="10%"><p>RIA/SK</p></td>
  </tr>
</table>
<blockquote>
  <h4><a name="_Interfaces"></a>DigiDoc3 Client interfaces</h4>
  <p>Provided: </p>
  <ul>
    <li><a href="http://id.ee/index.php?id=30591">Graphical user interface</a> - interface  for handling ASiC-E/XAdES (i.e. BDOC), DDOC, CDOC documents, setting  configuration parameters.
      <ul>
        <li>User: end-user</li>
        <li>Accessible with: GUI elements</li>
      </ul>
    </li>
    <li>PIN dialog – for inserting PIN  value during signature creation or decryption operations in all operating  systems except of Windows
      <ul>
        <li>User: end-user</li>
        <li>Accessible with: GUI elements</li>
      </ul>
    </li>
  </ul>
  <p>Required: </p>
  <ul>
    <li><a href="#_Kill_switch_service">Kill  switch service interface</a></li>
    <li><a href="#_DigiDocService_web_service">DigiDocService web service interface</a></li>
    <li><a href="#_Error_reports_repository">Error reports repository interface</a></li>
    <li><a href="#_LDAP_directory_interface">LDAP directory interface</a></li>
    <li>Interfaces with base libraries:
      <ul>
        <li><a href="#_Libdigidocpp_library’s_interfaces_1">Libdigidocpp library&rsquo;s API</a> –  for handling documents in supported digital signature formats (BDOC and DDOC). </li>
        <li>External base libraries: Qt5,  libldap, openssl</li>
      </ul>
    </li>
    <li>Interfaces with cryptographic  token&rsquo;s drivers (described in chap. <a href="#_Toc403599909">Drivers</a>) 
      <ul>
        <li>PKCS#11 interface </li>
        <li>CNG interface</li>
      </ul>
    </li>
  </ul>
  <h3>ID-card utility</h3>
  <p>   <img src="index_files/comp_utility.png" width="489" height="557"><br>
    Figure 2. Components of ID-card utility</p>
  <p>Table 4. Components of ID-card utility</p>
</blockquote>
<table border="1" cellspacing="0" cellpadding="0" width="99%">
  <tr>
    <td width="23%"><br>
      <strong>Component</strong></td>
    <td width="65%"><p align="center"><strong>Description</strong></p></td>
    <td width="10%"><p align="center"><strong>Owner/</strong><br>
      <strong>Developer</strong></p></td>
  </tr>
  <tr>
    <td width="23%"><p align="center"><strong>ID-card utility</strong></p></td>
    <td width="65%"><p>End-user    desktop application for managing ID-card&rsquo;s PIN/PUK codes replacement,    certificates&rsquo; renewal and other services.<br>
      Code    repository: <a href="https://github.com/open-eid/qesteidutil">https://github.com/open-eid/qesteidutil</a> <br>
      Wiki: <a href="https://github.com/open-eid/qesteidutil/wiki">https://github.com/open-eid/qesteidutil/wiki</a></p></td>
    <td width="10%"><p>RIA/SK</p></td>
  </tr>
  <tr>
    <td width="23%"><p align="center"><strong>ID-card utility&rsquo;s base libraries</strong></p></td>
    <td width="65%"><p> See <a href="#_ID-card_utility_interfaces">ID-card    utility interfaces</a></p></td>
    <td width="10%"><p> -</p></td>
  </tr>
  <tr>
    <td width="23%"><p align="center"><strong>ID-card owner&rsquo;s photo repository</strong></p></td>
    <td width="65%"><p> Repository where the Estonian national    ID-cards photos&rsquo; are kept. ID-card&rsquo;s owner can download the photo after the    user has been authenticated with PIN1 code.</p></td>
    <td width="10%"><p> RIA</p></td>
  </tr>
  <tr>
    <td width="23%"><p align="center"><strong>Error reports repository</strong></p></td>
    <td width="65%"><p> Described in chap. <a href="#_DigiDoc3_Client">DigiDoc3 Client</a></p></td>
    <td width="10%"><p> RIA</p></td>
  </tr>
  <tr>
    <td width="23%"><p align="center"><strong>@eesti.ee e-mail checking service</strong></p></td>
    <td width="65%"><p> Service that enables to set the properties    of e-mail address (@eesti.ee) that is provided for Estonian national ID-card    owners by the state. The user must be authenticated with PIN1 code.</p></td>
    <td width="10%"><p> RIA</p></td>
  </tr>
  <tr>
    <td width="23%"><p align="center"><strong>Certificate renewal service</strong></p></td>
    <td width="65%"><p> Service for renewing certificates on the    Estonian national ID-card.</p></td>
    <td width="10%"><p> SK</p></td>
  </tr>
  <tr>
    <td width="23%"><p align="center"><strong>M-ID checking service</strong></p></td>
    <td width="65%"><p> Service for checking the status of Estonian    national ID-card owner&rsquo;s Mobile-ID certificates. The user must be    authenticated with PIN1 code.</p></td>
    <td width="10%"><p> SK</p></td>
  </tr>
  <tr>
    <td width="23%"><p align="center"><strong>Updater,</strong><br>
      <strong>ID-updater Service</strong></p></td>
    <td width="65%"><p> Described in chap. <a href="#_Updating_mechanisms">Updating mechanisms</a></p></td>
    <td width="10%"><p>RIA/SK</p></td>
  </tr>
</table>
<blockquote>
  <h4><a name="_ID-card_utility_interfaces"></a>ID-card utility  interfaces</h4>
  <p>Provided:</p>
  <ul>
    <li><a href="http://www.id.ee/index.php?id=30590">Graphical user interface</a> –  interface for handling card management operations and using the external  services (listed under &ldquo;Required interfaces&rdquo;).
      <ul>
        <li>User: end-user</li>
        <li>Accessible with: GUI elements</li>
      </ul>
    </li>
    <li>PIN dialog – for inserting  PIN/PUK value in all supported operating systems.
      <ul>
        <li>User: end-user</li>
        <li>Accessible with: GUI elements</li>
      </ul>
    </li>
  </ul>
  <p>Required: </p>
  <ul>
    <li><a href="#_ID-card_owners’_photo">ID-card owners&rsquo; photo repository interface</a></li>
    <li><a href="#_Error_reports_repository">Error reports repository interface</a></li>
    <li><a href="#_Certificate_renewal_service">Certificate renewal service interface</a></li>
    <li><a href="#_Eesti.ee_e-mail_checking">Eesti.ee e-mail checking service interface</a></li>
    <li><a href="#_Certificate_renewal_service">Certificate renewal service interface</a></li>
    <li><a href="#_Mobile-ID_validity_checking">Mobile-ID validity checking service  interface</a></li>
    <li>Interfaces with base libraries:  Qt5</li>
    <li>Interfaces with cryptographic  token&rsquo;s drivers: 
      <ul>
        <li>Smartcardpp API (internal  component) </li>
      </ul>
    </li>
  </ul>
</blockquote>
<ul>
  <h2><a name="_Toc423563527">Software libraries</a></h2>
  <p>  <img src="index_files/sw_java.png" width="669" height="336"><br>
    Figure 3. Java software libraries and their components</p>
  <p><img src="index_files/sw_c.png" width="658" height="338"><br>
    Figure 4. C/C++ software libraries and their components</p>
  <p><img src="index_files/sw_.net.png" width="658" height="338"><br>
    <br>
    Figure 5. .NET software libraries and components</p>
  <p>Table 5. Software libraries and their components </p>
  <table border="1" cellspacing="0" cellpadding="0" width="99%">
    <tr>
      <td width="20%"><br>
        <strong>Component</strong></td>
      <td width="68%"><p align="center"><strong>Description</strong></p></td>
      <td width="10%"><p align="center"><strong>Owner/</strong><br>
        <strong>Developer</strong></p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>DigiDoc4j</strong></p></td>
      <td width="68%"><p>Java    software library that enables handling documents in BDOC 2.1(XAdES/ASiC-E)    and DIGIDOC-XML 1.3 formats. <br>
        Documentation: <a href="http://open-eid.github.io/digidoc4j/">http://open-eid.github.io/digidoc4j/</a> <br>
        Code    repository: <a href="https://github.com/open-eid/digidoc4j">https://github.com/open-eid/digidoc4j</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>DigiDoc4j utility program</strong></p></td>
      <td width="68%"><p>Small    command line application that implements the main functionality of DigiDoc4j    library. Used for testing purposes. Can also be used as a source for sample    client code for using DigiDoc4j. See also <a href="http://open-eid.github.io/digidoc4j/">http://open-eid.github.io/digidoc4j/</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>JDigiDoc</strong></p></td>
      <td width="68%"><p>Java    software library that enables handling documents in BDOC 2.1 (XAdES/ASiC-E)    and DIGIDOC-XML 1.3 formats and encryption/decryption in ENCDOC-XML 1.0    (CDOC). <br>
        Documentation: <a href="http://id.ee/public/SK-JDD-PRG-GUIDE.pdf">http://id.ee/public/SK-JDD-PRG-GUIDE.pdf</a> <br>
        Code    repository: <a href="https://github.com/open-eid/jdigidoc">https://github.com/open-eid/jdigidoc</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>JDigiDoc utility program</strong></p></td>
      <td width="68%"><p> Small command line application that implements    the main functionality of JDigiDoc library. Used for testing purposes. Can    also be used as a source for sample client code for using JDigiDoc. See also <a href="http://id.ee/public/SK-JDD-PRG-GUIDE.pdf">http://id.ee/public/SK-JDD-PRG-GUIDE.pdf</a>.</p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Libdigidocpp</strong></p></td>
      <td width="68%"><p> C++ software library that enables handling    documents in BDOC 2.1  (XAdES/ASiC-E) and    DIGIDOC-XML 1.3 formats (via CDigiDoc base library). <br>
        Wiki: <a href="https://github.com/open-eid/libdigidocpp/wiki">https://github.com/open-eid/libdigidocpp/wiki</a> <br>
        Code    repository: <a href="https://github.com/open-eid/libdigidocpp">https://github.com/open-eid/libdigidocpp</a> <br>
        Documentation: <a href="http://open-eid.github.io/libdigidocpp/">http://open-eid.github.io/libdigidocpp/</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Libdigidocpp utility program</strong></p></td>
      <td width="68%"><p> Small command line application (digidoc-tool.exe)    that implements the main functionality of Libdigidocpp library. Used for    testing purposes. Can also be used as a source for sample client code for    using Libdigidocpp. See also <a href="http://open-eid.github.io/libdigidocpp/">http://open-eid.github.io/libdigidocpp/</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>CDigiDoc</strong></p></td>
      <td width="68%"><p>Software    library in C that enables handling digitally signed documents in DIGIDOC-XML    1.3 format and encryption/decryption in ENCDOC-XML 1.0 (CDOC). <br>
        Documentation: <a href="http://id.ee/public/SK-CDD-PRG-GUIDE.pdf">http://id.ee/public/SK-CDD-PRG-GUIDE.pdf</a> <br>
        Code    repository: <a href="https://github.com/open-eid/libdigidoc">https://github.com/open-eid/libdigidoc</a> <br>
        Wiki: <a href="https://github.com/open-eid/libdigidoc/wiki">https://github.com/open-eid/libdigidoc/wiki</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>CDigiDoc utility program</strong></p></td>
      <td width="68%"><p> Small command line application that    implements the main functionality of CDigiDoc library. Used for testing    purposes. Can also be used as a source for sample client code for using    CDigiDoc. See also <a href="http://id.ee/public/SK-CDD-PRG-GUIDE.pdf">http://id.ee/public/SK-CDD-PRG-GUIDE.pdf</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>NDigiDoc</strong></p></td>
      <td width="68%"><p> Software library in .NET enabling    encryption/decryption in ENCDOC-XML 1.0 (CDOC). <br>
        Documentation: <a href="http://id.ee/public/NDigiDoc.pdf">http://id.ee/public/NDigiDoc.pdf</a> <br>
        Code    repository: <a href="https://github.com/open-eid/ndigidoc">https://github.com/open-eid/ndigidoc</a></p></td>
      <td width="10%"><p>SK/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>NDigiDoc utility program</strong></p></td>
      <td width="68%"><p> Small command line application that    implements the main functionality of NDigiDoc library. Used for testing    purposes. Can also be used as a source for sample client code for using    NDigiDoc. See also <a href="http://id.ee/public/NDigiDoc.pdf">http://id.ee/public/NDigiDoc.pdf</a>.</p></td>
      <td width="10%"><p>SK/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>DigiDocCSharp</strong></p></td>
      <td width="68%"><p>.NET    C# wrapper classes for using Libidigidocpp library&rsquo;s functionality in .NET    environment. Created with Swig tool. See also <a href="https://github.com/open-eid/libdigidocpp/blob/master/examples/DigiDocCSharp/README.md">https://github.com/open-eid/libdigidocpp/blob/master/examples/DigiDocCSharp/README.md</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>TSL repository</strong></p></td>
      <td width="68%"><p>Described    in chap. <a href="#_DigiDoc3_Client">DigiDoc3 Client</a></p></td>
      <td width="10%"><p>-</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Time-stamping service</strong></p></td>
      <td width="68%"><p>Described    in chap. <a href="#_DigiDoc3_Client">DigiDoc3 Client</a></p></td>
      <td width="10%"><p>-</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>OCSP service</strong></p></td>
      <td width="68%"><p>Described    in chap. <a href="#_DigiDoc3_Client">DigiDoc3 Client</a></p></td>
      <td width="10%"><p>-</p></td>
    </tr>
  </table>
  <br clear="all">
  <p><a name="_Toc398635100"></a><a name="_Toc398633398"></a><a name="_Toc398590574"></a><a name="_Toc387845388"><strong><em>&nbsp;</em></strong></a></p>
  <h3><a name="_Toc398635105"></a><a name="_Toc398633403"></a><a name="_Toc398590579"></a><a name="_Libdigidocpp_library’s_interfaces"></a><a name="_DigiDoc4j_library’s_interfaces"></a>DigiDoc4j library&rsquo;s interfaces </h3>
  <p>Provided: </p>
  <ol>
    <li> <a href="http://open-eid.github.io/digidoc4j/">DigiDoc4j API </a></li>
    <ol>
      <li>User: DigiDoc4j utility program</li>
      <li>Accessible with: Java</li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li> <a href="#_TSL_repositories’_interfaces">TSL  repositories&rsquo; interfaces</a></li>
    <li> <a href="#_Time-stamping_service_interface">Time-stamping  service interface</a></li>
    <li> <a href="#_OCSP_service_interface">OCSP service  interface</a></li>
    <li>Interfaces  with base libraries:</li>
    <ol>
      <li> <a href="#_JDigiDoc_library’s_interfaces">JDigiDoc  library&rsquo;s API </a> – for handling documents in DDOC format. </li>
      <li>Other base libraries: see <a href="http://open-eid.github.io/digidoc4j/">http://open-eid.github.io/digidoc4j/ </a>. </li>
    </ol>
    <li>Interfaces with cryptographic  token&rsquo;s drivers (described in chap. <a href="#_Toc403599909">Drivers </a>) </li>
    <ol>
      <li>PKCS#12 interface</li>
    </ol>
  </ol>
  <h3>DigiDoc4j utility program&rsquo;s  interfaces </h3>
  <p>Provided: </p>
  <ol>
    <li> <a href="http://open-eid.github.io/digidoc4j/">DigiDoc4j utility program&rsquo;s interface </a></li>
    <ol>
      <li>User: server application,  end-user application, end-user</li>
      <li>Accessible with: command line</li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li> <a href="http://open-eid.github.io/digidoc4j/">DigiDoc4j API </a></li>
  </ol>
  <h3><a name="_JDigiDoc_library’s_interfaces"></a>JDigiDoc library&rsquo;s interfaces </h3>
  <p>Provided: </p>
  <ol>
    <li> <a href="http://id.ee/public/SK-JDD-PRG-GUIDE.pdf">JDigiDoc API </a></li>
    <ol>
      <li>User: JDigiDoc utility program,  DigiDoc4j library</li>
      <li>Accessible with: Java</li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li> <a href="#_OCSP_service_interface">OCSP service  interface</a></li>
    <li>Interfaces with base libraries: see <a href="http://id.ee/public/SK-JDD-PRG-GUIDE.pdf">http://id.ee/public/SK-JDD-PRG-GUIDE.pdf</a> for more information.</li>
    <li>Interfaces with cryptographic  token&rsquo;s drivers (described in chap. <a href="#_Toc403599909">Drivers </a>): </li>
    <ol>
      <li>PKCS#11 interface</li>
      <li>CNG interface</li>
      <li>PKCS#12 interface</li>
    </ol>
  </ol>
  <h3>JDigiDoc utility program&rsquo;s  interfaces </h3>
  <p>Provided: </p>
  <ol>
    <li> <a href="http://id.ee/public/SK-JDD-PRG-GUIDE.pdf">JDigiDoc utility program&rsquo;s interface </a></li>
    <ol>
      <li>User: server application,  end-user application, end-user</li>
      <li>Accessible with: command line</li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li>JDigiDoc API: see chap. <a href="#_JDigiDoc_library’s_interfaces">JDigiDoc library&rsquo;s interfaces</a></li>
  </ol>
  <h3><a name="_Libdigidocpp_library’s_interfaces_1"></a>Libdigidocpp  library&rsquo;s interfaces</h3>
  <p><a name="_Ref398569508">Provided: </a></p>
  <ol>
    <li> <a href="http://open-eid.github.io/libdigidocpp/">Libdigidocpp API </a></li>
    <ol>
      <li>User: DigiDoc3 Client,  Libdigidocpp utility program, DigiDocCSharp .NET wrapper classes</li>
      <li>Accessible with: C++ </li>
    </ol>
  </ol>
  <p>Required: </p>
  <ol>
    <li> <a href="#_TSL_repositories’_interfaces">TSL repositories&rsquo; interfaces</a></li>
    <li> <a href="#_Time-stamping_service_interface">Time-stamping service interface</a></li>
    <li> <a href="#_OCSP_service_interface">OCSP service interface</a></li>
    <li>Interfaces with base libraries:</li>
    <ol>
      <li>CDigiDoc library&rsquo;s API – for handling documents in  DDOC format. See chap. <a href="#_CDigiDoc_library’s_interfaces">CDigiDoc library&rsquo;s interfaces</a></li>
      <li>Other base libraries: OpenSSL, xerces-c, xalan-c,  codesynthesis-xsd, libxml-security-c. See also <a href="http://open-eid.github.io/libdigidocpp/">http://open-eid.github.io/libdigidocpp/</a></li>
    </ol>
    <li>Interfaces with cryptographic  token&rsquo;s drivers (described in chap. <a href="#_Toc403599909">Drivers </a>) </li>
    <ol>
      <li>PKCS#11 interface </li>
      <li>CNG interface </li>
      <li>PKCS#12 interface</li>
    </ol>
  </ol>
  <h3>Libdigidocpp utility program&rsquo;s interfaces </h3>
  <p>Provided: </p>
  <ol>
    <li> <a href="http://open-eid.github.io/libdigidocpp/">Libdigidocpp utility  program&rsquo;s interface </a></li>
    <ol>
      <li>User: server application,  end-user application, end-user</li>
      <li>Accessible with: command line </li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li>Libdigidocpp API: see chap. <a href="#_Libdigidocpp_library’s_interfaces">Libdigidocpp library&rsquo;s  interfaces</a></li>
  </ol>
  <h3><a name="_Ref403731696"></a><a name="_Toc398635107"></a><a name="_Toc398633405"></a><a name="_Toc398590581"></a><a name="_CDigiDoc_library’s_interfaces"></a>CDigiDoc library&rsquo;s  interfaces </h3>
  <p>Provided: </p>
  <ol>
    <li> <a href="http://id.ee/index.php?id=35782">CDigiDoc API </a></li>
    <ol>
      <li>User: Libdigidocpp library,  CDigiDoc utility program</li>
      <li>Accessible with: C</li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li> <a href="#_OCSP_service_interface">OCSP service interface</a></li>
    <li>Interfaces with base libraries: OpenSSL, libxml2. See also <a href="http://id.ee/index.php?id=35782">http://id.ee/index.php?id=35782</a>. </li>
    <li>Interfaces with cryptographic  token&rsquo;s drivers (described in chap. <a href="#_Toc403599909">Drivers </a>) </li>
    <ol>
      <li>PKCS#11 interface </li>
      <li>CNG interface </li>
      <li>PKCS#12 interface</li>
    </ol>
  </ol>
  <h3>CDigiDoc utility program&rsquo;s interfaces </h3>
  <p>Provided: </p>
  <ol>
    <li> <a href="http://id.ee/index.php?id=35782">CDigiDoc utility program&rsquo;s  interface </a></li>
    <ol>
      <li>User: server application,  end-user application, end-user</li>
      <li>Accessible with: command  line/console </li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li>CDigiDoc API: see chap. <a href="#_CDigiDoc_library’s_interfaces">CDigiDoc library&rsquo;s  interfaces</a></li>
  </ol>
  <h3><a name="_Ref403731726"></a><a name="_Toc398635108"></a><a name="_Toc398633406"></a><a name="_Toc398590582"></a><a name="_NDigiDoc_library’s_interfaces"></a>NDigiDoc library&rsquo;s  interfaces </h3>
  <p>Provided: </p>
  <ol>
    <li> <a href="http://id.ee/public/NDigiDoc.pdf">NDigiDoc API </a></li>
    <ol>
      <li>User: server application,  end-user application; NDigiDoc utility program</li>
      <li>Accessible with: .NET</li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li>Interfaces with base libraries: see <a href="http://id.ee/public/NDigiDoc.pdf">http://id.ee/public/NDigiDoc.pdf </a> for more information.</li>
    <li>Interfaces with cryptographic  token&rsquo;s drivers (described in chap. <a href="#_Toc403599909">Drivers </a>) </li>
    <ol>
      <li>PKCS#12 interface</li>
    </ol>
  </ol>
  <h3>NDigiDoc utility program&rsquo;s interfaces </h3>
  <p>Provided: </p>
  <ol>
    <li> <a href="http://id.ee/public/NDigiDoc.pdf">NDigiDoc utility program&rsquo;s  interface </a></li>
    <ol>
      <li>User: server application,  end-user application, end-user</li>
      <li>Accessible with: command  line/console   </li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li>NDigiDoc API: see chap. <a href="#_NDigiDoc_library’s_interfaces">NDigiDoc library&rsquo;s  interfaces</a></li>
  </ol>
  <br clear="all">
  <h2><a name="_Toc423563528">Web components</a></h2>
  <h3>Web signing components</h3>
  <p>The web signing component diagrams describe  components that are needed for signature creation in web applications with eID  cards.</p>
  <p><img src="index_files/web_sign.png" width="643" height="517"><br>
    <br>
    Figure 6. Components for signature creation in web environment</p>
  <p>Table 6. Components for signing in web environment</p>
  <table border="1" cellspacing="0" cellpadding="0" width="99%">
    <tr>
      <td width="20%"><br>
        <strong>Component</strong></td>
      <td width="68%"><p align="center"><strong>Description</strong></p></td>
      <td width="10%"><p align="center"><strong>Owner/</strong><br>
        <strong>Developer</strong></p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>hwcrypto.js</strong></p></td>
      <td width="68%"><p> JavaScript library that enables    communication with the browser signing modules (plug-in or extension) of the    different web browsers. <br>
        Wiki: <a href="https://github.com/open-eid/hwcrypto.js/wiki">https://github.com/open-eid/hwcrypto.js/wiki</a> <br>
        Code    repository: <a href="https://github.com/open-eid/hwcrypto.js">https://github.com/open-eid/hwcrypto.js</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>A web application</strong></p></td>
      <td width="68%"><p> A web application that implements signature    creation with an eID-card in browser environment.</p></td>
      <td width="10%"><p> -</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>EstEID Firefox plug-in</strong></p></td>
      <td width="68%"><p> Browser signing module (NPAPI-based plug-in)    that is used in Firefox (supported in Windows and Linux) and Safari (supported    in Mac OS) browsers. <br>
        The    plug-in enables data exchange with the cryptographic token&rsquo;s driver that is    used for signing. <br>
        In    Windows environment, the driver that is implementing CNG/CAPI interface is    used, along with the operating system&rsquo;s native PIN insertion and certificate    selection dialogs. Otherwise, PKCS#11 driver is used. <br>
        Code    repository: <a href="https://github.com/open-eid/browser-token-signing">https://github.com/open-eid/browser-token-signing</a> <br>
        Wiki: <a href="https://github.com/open-eid/browser-token-signing/wiki">https://github.com/open-eid/browser-token-signing/wiki</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>EstEIDPluginBHO</strong></p></td>
      <td width="68%"><p>Browser    signing module (BHO-based plug-in) that is used in Internet explorer browser (supported    in Windows operating system). The plug-in enables data exchange with the    cryptographic token&rsquo;s driver that is used for signing.<br>
        Code    repository: <a href="https://github.com/open-eid/browser-token-signing">https://github.com/open-eid/browser-token-signing</a> <br>
        Wiki: <a href="https://github.com/open-eid/browser-token-signing/wiki">https://github.com/open-eid/browser-token-signing/wiki</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>chrome-token-signing </strong></p></td>
      <td width="68%"><p>Comprises    two subcomponents: browser extension component and native OSX/Linux/Windows component    that implements Native Messaging API (JSON). The browser extension enables    data exchange with the native component that in turn interacts with the cryptographic    token&rsquo;s driver for signing.<br>
        Code    repository: <a href="https://github.com/open-eid/chrome-token-signing">https://github.com/open-eid/chrome-token-signing</a> <br>
        Wiki: <a href="https://github.com/open-eid/chrome-token-signing/wiki">https://github.com/open-eid/chrome-token-signing/wiki</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Minidriver</strong></p></td>
      <td width="68%"><p>Used    via CNG interface in Windows environment only. Described in chap. <a href="#_Toc403599909">Drivers</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
  </table>
  <h4><a name="_Toc398635109"></a><a name="_Toc398633407">Hwcrypto.js library</a>&rsquo;s interfaces</h4>
  <p>Provided: </p>
  <ol>
    <li><a href="https://github.com/open-eid/hwcrypto.js/wiki/ModernAPI">hwcrypto.js  library&rsquo;s API</a></li>
    <ol>
      <li>User: a web application in  browser environment</li>
      <li>Accessible with: JavaScript</li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li>Interfaces with browser signing modules: </li>
    <ol>
      <li><a href="#_EstEID_Firefox_plug-in’s">EstEID Firefox  plug-in&rsquo;s interfaces</a></li>
      <li><a href="#_EstEIDPluginBHO_plug-in’s_interface">EstEIDPluginBHO  plug-in&rsquo;s interfaces</a></li>
      <li><a href="#_Chrome-token-signing_extension’s_in">Chrome-token-signing extension&rsquo;s  interfaces</a></li>
    </ol>
  </ol>
  <h4><a name="_Ref399150287"></a><a name="_EstEID_Firefox_plug-in’s"></a>EstEID Firefox plug-in&rsquo;s interfaces</h4>
  <p>Provided: </p>
  <ol>
    <li><a href="https://github.com/open-eid/hwcrypto.js/wiki/LegacyAPI">EstEID Firefox  plug-in&rsquo;s API</a></li>
    <ol>
      <li>User: a web application in  browser environment, hwcrypto.js library</li>
      <li>Accessible with: C</li>
    </ol>
    <li>PIN dialog – for inserting PIN2  value during signature creation in all operating systems except of Windows</li>
    <ol>
      <li>User: end-user</li>
      <li>Accessible with: GUI elements</li>
    </ol>
    <li>Certificate selection dialog</li>
    <ol>
      <li>User: end-user</li>
      <li>Accessible with: GUI elements</li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li>Interfaces with cryptographic  token&rsquo;s drivers (described in chap. <a href="#_Toc403599909">Drivers</a>) </li>
    <ol>
      <li>PKCS#11 interface</li>
      <li>CNG interface</li>
    </ol>
  </ol>
  <h4><a name="_Ref399150106"></a><a name="_EstEIDPluginBHO_plug-in’s_interface"></a>EstEIDPluginBHO plug-in&rsquo;s interfaces</h4>
  <p>Provided: </p>
  <ol>
    <li><a href="https://github.com/open-eid/hwcrypto.js/wiki/LegacyAPI">EstEIDPluginBHO plug-in&rsquo;s  API</a></li>
    <ol>
      <li>User: a web application in  browser environment, hwcrypto.js library</li>
      <li>Accessible with: C++</li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li>Interfaces with cryptographic  token&rsquo;s drivers (described in chap. <a href="#_Toc403599909">Drivers</a>) </li>
    <ol>
      <li>CNG/CAPI interface</li>
    </ol>
  </ol>
  <h4><a name="_Ref399150127"></a><a name="_Chrome-token-signing_extension’s_in"></a>Chrome-token-signing  extension&rsquo;s interfaces</h4>
  <p>Provided: </p>
  <ol>
    <li><a href="https://github.com/open-eid/chrome-token-signing/wiki/Extension#api">Chrome-token-signing  extension&rsquo;s  API</a></li>
    <ol>
      <li>User: a web application in  browser environment, hwcrypto.js library</li>
      <li>Accessible with: C++</li>
    </ol>
    <li>PIN dialog – for inserting PIN2  value during signature creation </li>
    <ol>
      <li>User: end-user</li>
      <li>Accessible with: GUI elements</li>
    </ol>
    <li>Certificate selection dialog</li>
    <ol>
      <li>User: end-user</li>
      <li>Accessible with: GUI elements</li>
    </ol>
  </ol>
  <p>Required:</p>
  <ol>
    <li>Interfaces with cryptographic  token&rsquo;s drivers (described in chap. <a href="#_Toc403599909">Drivers</a>)  </li>
    <ol>
      <li>PKCS#11 interface</li>
    </ol>
  </ol>
  <h3>Web authentication components</h3>
  <p>Authentication in web browsers is done with  the browsers&rsquo; and operating systems&rsquo; native components. In case of  authenticating in Firefox browser then Firefox pkcs11-module-loader JavaScript  component is used to load the OpenSC PKCS#11 driver by the browser.</p>
  <p><img src="index_files/web_auth.png" width="643" height="455"><br>
    <br>
    Figure 7. Web authentication components</p>
  <p>Table 7. Web authentication components</p>
  <table border="1" cellspacing="0" cellpadding="0" width="99%">
    <tr>
      <td width="20%"><br>
        <strong>Component</strong></td>
      <td width="68%"><p align="center"><strong>Description</strong></p></td>
      <td width="10%"><p align="center"><strong>Owner/</strong><br>
        <strong>Developer</strong></p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>pkcs11-loader.js</strong></p></td>
      <td width="68%"><p> A JavaScript component that is used to load    the OpenSC PKCS#11 driver to the Firefox browser&rsquo;s cryptographic devices list    during each initialization of the browser. Needed during authentication process    with eID-card in Firefox browser in all supported operating systems.<br>
        Code    repository: <a href="https://github.com/open-eid/firefox-pkcs11-loader">https://github.com/open-eid/firefox-pkcs11-loader</a> <br>
        Wiki: <a href="https://github.com/open-eid/firefox-pkcs11-loader/wiki">https://github.com/open-eid/firefox-pkcs11-loader/wiki</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>OSX native certificate selection and PIN dialog</strong></p></td>
      <td width="68%"><p> PIN dialog and certificate selection windows    provided by the operating system&rsquo;s native components.</p></td>
      <td width="10%"><p> -</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Minidriver</strong></p></td>
      <td width="68%"><p>Described    in chap. <a href="#_Toc403599909">Drivers</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
  </table>
  <h2><a name="_Toc423563529"></a><a name="_Ref399172638">Drivers</a></h2>
  <p>  <img src="index_files/drivers.png" width="598" height="495"><br>
    Figure 8. Cryptographic tokens&rsquo; drivers</p>
  <p>Table 8. Cryptographic token driver components</p>
  <table border="1" cellspacing="0" cellpadding="0" width="99%">
    <tr>
      <td width="20%"><br>
        <strong>Component</strong></td>
      <td width="68%"><p align="center"><strong>Description</strong></p></td>
      <td width="10%"><p align="center"><strong>Owner/</strong><br>
        <strong>Developer</strong></p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>EstEID PKCS#11 driver</strong></p></td>
      <td width="68%"><p>A    driver for accessing eID-cards. Connects with the card via the operating    system&rsquo;s native PC/SC interface. <br>
        Used    as a default driver for signature creation with eID card in browser    environment in case of OSX platform. <br>
        Used    as a default driver for authentication with eID card in browser environment    in case of Firefox browser in OSX platform. <br>
        Code    repository: <a href="https://github.com/open-eid/esteid-pkcs11">https://github.com/open-eid/esteid-pkcs11</a> <br>
        Wiki: <a href="https://github.com/open-eid/esteid-pkcs11/wiki">https://github.com/open-eid/esteid-pkcs11/wiki</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>OpenSC PKCS#11 driver</strong></p></td>
      <td width="68%"><p>A    driver for accessing eID-cards. Connects with the card via the operating    system&rsquo;s native PC/SC interface. <br>
        Used    as a default driver for authentication with eID card in browser environment    in case of Windows and Linux platforms. <br>
        Used    as a default driver for signature creation in web browser environment in case    of Linux platform.<br>
        Wiki: <a href="https://github.com/OpenSC/OpenSC/wiki">https://github.com/OpenSC/OpenSC/wiki</a></p></td>
      <td width="10%"><p> -</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Smartcardpp</strong></p></td>
      <td width="68%"><p>eID    card driver&rsquo;s helper component. Inner component.<br>
        Code    repository: <a href="https://github.com/open-eid/smartcardpp">https://github.com/open-eid/smartcardpp</a> <br>
        Wiki: <a href="https://github.com/open-eid/smartcardpp/wiki">https://github.com/open-eid/smartcardpp/wiki</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Minidriver</strong></p></td>
      <td width="68%"><p> Used as a default driver for accessing Estonian    eID-cards via CNG interface for signature creation in web browser environment    in case of Windows platform.<br>
        Used    as a default driver for authentication with eID card in Chrome and Internet    Explorer browsers in case of Windows platform. <br>
        Code    repository: <a href="https://github.com/open-eid/minidriver">https://github.com/open-eid/minidriver</a> <br>
        Wiki: <a href="https://github.com/open-eid/minidriver/wiki">https://github.com/open-eid/minidriver/wiki</a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>ATR Filter</strong></p></td>
      <td width="68%"><p>Base    component for Minidriver (see <a href="http://support.microsoft.com/kb/981665">http://support.microsoft.com/kb/981665</a> for more information). </p></td>
      <td width="10%"><p> -</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Esteid Tokend</strong></p></td>
      <td width="68%"><p>A    driver for accessing eID-cards. Connects with the card via the operating    system&rsquo;s native PC/SC interface. <br>
        Used    as a default driver for authentication with eID card in browser environment    in case OSX platform.<br>
        Code    repository: <a href="https://github.com/open-eid/esteid-tokend">https://github.com/open-eid/esteid-tokend</a> <br>
        Wiki: <a href="https://github.com/open-eid/esteid-tokend/wiki">https://github.com/open-eid/esteid-tokend/wiki</a>  </p></td>
      <td width="10%"><p> RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>PKCS#12 implementation via    base library</strong></p></td>
      <td width="68%"><p>An    implementation of PKCS#12 interface by the component&rsquo;s base libraries. </p></td>
      <td width="10%"><p> -</p></td>
    </tr>
  </table>
  <h3><a name="_Toc398633399"></a><a name="_Toc398590575"></a><a name="_Toc387845394"></a><a name="_Toc387768427"></a><a name="_Ref399157951"></a><a name="_Toc399121699"></a><a name="_Toc399144838"></a><a name="_Toc399144891"></a><a name="_Toc399149801"></a><a name="_Toc399149959"></a><a name="_Toc399150263"></a><a name="_Toc399150295"></a><a name="_Toc399158202"></a><a name="_Toc399162204"></a><a name="_Toc399165133"></a><a name="_Cryptographic_tokens_drivers’"></a><a name="_PKCS#11_drivers"></a>PKCS#11 driver interfaces</h3>
  <p>Components:</p>
  <ul>
    <li>EstEID  PKCS#11 driver</li>
    <li>OpenSC  PKCS#11 driver</li>
  </ul>
  <p>Provided: </p>
  <ul>
    <li>PKCS#11 API</li>
    <ul>
      <li>User: a browser signing module,  software library</li>
      <li>Accessible with: C++</li>
      <li>Documentation: </li>
      <ul>
        <li>PKCS#11 API: <a href="http://www.emc.com/emc-plus/rsa-labs/standards-initiatives/pkcs-11-cryptographic-token-interface-standard.htm">http://www.emc.com/emc-plus/rsa-labs/standards-initiatives/pkcs-11-cryptographic-token-interface-standard.htm</a></li>
        <li>source code for the list of  implemented functions</li>
      </ul>
    </ul>
  </ul>
  <p>Required:</p>
  <ul>
    <li>PC/SC: see chap. <a href="#_PC/SC_driver">PC/SC driver </a></li>
  </ul>
  <h3><a name="_Minidriver"></a>Minidriver  interfaces</h3>
  <p>Provided: </p>
  <ul>
    <li>CNG/Minidriver API</li>
    <ul>
      <li>User: a browser signing module,  software library</li>
      <li>Accessible with: C/C++</li>
      <li>Documentation:</li>
      <ul>
        <li>CNG: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa376210(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/windows/desktop/aa376210(v=vs.85).aspx</a>, </li>
        <li>Minidriver API: <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/dn631754(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/windows/hardware/dn631754(v=vs.85).aspx</a></li>
        <li>source code for the list of  implemented functions</li>
      </ul>
    </ul>
    <li>CAPI/Minidriver API</li>
    <ul>
      <li>User: a browser signing module,  software library</li>
      <li>Accessible with: C/C++</li>
      <li>Documentation: </li>
      <ul>
        <li>CAPI:  <a href="http://msdn.microsoft.com/en-us/library/aa380256.aspx">http://msdn.microsoft.com/en-us/library/aa380256.aspx</a></li>
        <li>Minidriver API: <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/dn631754(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/windows/hardware/dn631754(v=vs.85).aspx</a></li>
        <li>source code for the list of  implemented functions</li>
      </ul>
    </ul>
  </ul>
  <p>Required:</p>
  <ul>
    <li>PC/SC: see chap. <a href="#_PC/SC_driver">PC/SC driver </a></li>
  </ul>
  <h3><a name="_PKCS#12_implementation_via"></a>PKCS#12 implementation via base library</h3>
  <p>Provided: </p>
  <ul>
    <li>PKCS#12  interface</li>
    <ul>
      <li>User: a software library</li>
      <li>Accessible with: PKCS#12 API</li>
      <li>Documentation: see  documentation of the respective component&rsquo;s appropriate base library</li>
    </ul>
  </ul>
  <h3>Tokend driver interfaces</h3>
  <p>Components  implementing the interface:</p>
  <ul>
    <li>EstEID  Tokend driver</li>
  </ul>
  <p>Provided: </p>
  <ul>
    <li>CDSA</li>
    <ul>
      <li>User: software library</li>
      <li>Accessible with: C++</li>
      <li>Documentation: see <a href="https://developer.apple.com/library/mac/documentation/security/conceptual/cryptoservices/CDSA/CDSA.html">https://developer.apple.com/library/mac/documentation/security/conceptual/cryptoservices/CDSA/CDSA.html</a></li>
    </ul>
  </ul>
  <p>Required:</p>
  <ul>
    <li>PC/SC: see chap. <a href="#_PC/SC_driver">PC/SC driver </a></li>
  </ul>
  <h3><a name="_PC/SC_driver"></a> <a name="_Ref399162158">PC/SC  driver</a> interfaces</h3>
  <p>Provided:</p>
  <ul>
    <li><a name="_Toc398635112"></a><a name="_Toc398633409"></a><a name="_Toc398590583">PC/SC interface</a></li>
    <ul>
      <li>User: eID-card&rsquo;s driver</li>
      <li>Accessible with: PC/SC API</li>
      <li>Documentation: see <a href="http://www.pcscworkgroup.com/specifications/overview.php">http://www.pcscworkgroup.com/specifications/overview.php</a></li>
    </ul>
  </ul>
  <p>Required: not in the scope  of this document.</p>
  <br clear="all">
  <p><strong><em>&nbsp;</em></strong></p>
  <h2><a name="_Toc423563530"></a><a name="_Updating_mechanisms"></a>Updating mechanisms </h2>
  <p>The following chapter  describes automatic updating mechanisms of different ID-software desktop  applications. Several combinations of central software update checking and  distribution environments are used depending on the end-user&rsquo;s operating  system. </p>
  <h3><a name="_Windows_updating_mechanism"></a>Windows updating  mechanism</h3>
  <p><img src="index_files/up_win.png" width="643" height="479"><br>
    Figure 9.  Updating mechanisms in Windows</p>
  <p>Table 9.  Updating mechanisms in Windows</p>
  <table border="1" cellspacing="0" cellpadding="0" width="99%">
    <tr>
      <td width="20%"><br>
        <strong>Component</strong></td>
      <td width="68%"><p align="center"><strong>Description</strong></p></td>
      <td width="10%"><p align="center"><strong>Owner/</strong><br>
        <strong>Developer</strong></p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>ID-updater</strong></p></td>
      <td width="68%"><p> Service    that is periodically checks if newer versions of related ID-software    components are available for download, initiates the download and    installation if necessary. </p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>MS    Update</strong></p></td>
      <td width="68%"><p>Microsoft Update – see Microsoft&rsquo;s documentation    for more information.</p></td>
      <td width="10%"><p> -</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Chrome    Web Store</strong></p></td>
      <td width="68%"><p>See <a href="https://chrome.google.com/webstore/detail/token-signing/ckjefchnfjhjfedoccjbhjpbncimppeg">https://chrome.google.com/webstore/detail/token-signing/ckjefchnfjhjfedoccjbhjpbncimppeg </a></p></td>
      <td width="10%"><p> -</p></td>
    </tr>
  </table>
  <h3>OS X updating mechanism</h3>
  <p><img src="index_files/up_osx.png" width="643" height="388"><br>
    Figure 10.  Updating mechanisms in OSX</p>
  <p>Table 10.  Updating mechanisms in OSX</p>
  <table border="1" cellspacing="0" cellpadding="0" width="99%">
    <tr>
      <td width="20%"><br>
        <strong>Component</strong></td>
      <td width="68%"><p align="center"><strong>Description</strong></p></td>
      <td width="10%"><p align="center"><strong>Owner/</strong><br>
        <strong>Developer</strong></p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>ID-updater</strong></p></td>
      <td width="68%"><p> Described    in chap. <a href="#_Windows_updating_mechanism">Windows updating mechanism </a></p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Apple    App Store</strong></p></td>
      <td width="68%"><p> See Apple    App Store documentation.</p></td>
      <td width="10%"><p> -</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Chrome    Web Store</strong></p></td>
      <td width="68%"><p>See <a href="https://chrome.google.com/webstore/detail/token-signing/ckjefchnfjhjfedoccjbhjpbncimppeg">https://chrome.google.com/webstore/detail/token-signing/ckjefchnfjhjfedoccjbhjpbncimppeg </a></p></td>
      <td width="10%"><p> -</p></td>
    </tr>
  </table>
  <h3>Linux updating mechanism</h3>
  <p><img src="index_files/up_linux.png" width="643" height="419"><img src="index_files/up_linux.png" width="643" height="419"><br>
    Figure 11.  Updating mechanism in Linux</p>
  <p>Table 11.  Updating mechanisms in OSX</p>
  <table border="1" cellspacing="0" cellpadding="0" width="99%">
    <tr>
      <td width="20%"><br>
        <strong>Component</strong></td>
      <td width="68%"><p align="center"><strong>Description</strong></p></td>
      <td width="10%"><p align="center"><strong>Owner/</strong><br>
        <strong>Developer</strong></p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Ubuntu    package updates</strong></p></td>
      <td width="68%"><p> Managed    and maintained by SK. The binary packages are released for installation and    updating to <a href="https://installer.id.ee/media/ubuntu/">https://installer.id.ee/media/ubuntu/</a> repository.</p></td>
      <td width="10%"><p>RIA/SK</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Packages    updates for other distros</strong></p></td>
      <td width="68%"><p> Managed    by the open-source community. Packages are built, added and updated in Estobuntu    and Fedora distributions by the package maintainers.</p></td>
      <td width="10%"><p> -</p></td>
    </tr>
    <tr>
      <td width="20%"><p align="center"><strong>Chrome    Web Store</strong></p></td>
      <td width="68%"><p>See <a href="https://chrome.google.com/webstore/detail/token-signing/ckjefchnfjhjfedoccjbhjpbncimppeg">https://chrome.google.com/webstore/detail/token-signing/ckjefchnfjhjfedoccjbhjpbncimppeg </a></p></td>
      <td width="10%"><p> -</p></td>
    </tr>
  </table>
  <p>&nbsp;</p>
  <br clear="all">
  <h2><a name="_Toc423563531">External  services&rsquo; interfaces</a></h2>
  <h3><a name="_Ref403731741"></a><a name="_Ref398569326"></a><a name="_Toc399149809"></a><a name="_Toc399149967"></a><a name="_Toc399150271"></a><a name="_Toc399150303"></a><a name="_Toc399158210"></a><a name="_Toc399162212"></a><a name="_Toc399165141"></a><a name="_Toc399149810"></a><a name="_Toc399149968"></a><a name="_Toc399150272"></a><a name="_Toc399150304"></a><a name="_Toc399158211"></a><a name="_Toc399162213"></a><a name="_Toc399165142"></a><a name="_Toc399149817"></a><a name="_Toc399149975"></a><a name="_Toc399150279"></a><a name="_Toc399150311"></a><a name="_Toc399158218"></a><a name="_Toc399162220"></a><a name="_Toc399165149"></a><a name="_Toc399149819"></a><a name="_Toc399149977"></a><a name="_ID-updater_interface"></a>ID-updater interface </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: DigiDoc3 Client </li>
    <li>Accessible with: HTTPS protocol</li>
    <li>Accessible from:</li>
    <ul>
      <li>Windows: <a href="https://installer.id.ee/media/win/products.xml">https://installer.id.ee/media/win/products.xml</a>, </li>
      <li>OSX: <a href="https://installer.id.ee/media/osx/products.xml">https://installer.id.ee/media/osx/products.xml</a>, </li>
      <li>Linux: <a href="https://installer.id.ee/media/ubuntu/pool/main/">https://installer.id.ee/media/ubuntu/pool/main/</a>  </li>
    </ul>
  </ul>
  <h3><a name="_Ref398569337"></a><a name="_Kill_switch_service"></a>Kill switch service interface </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: DigiDoc3 Client</li>
    <li>Accessible with: XML file sent  over HTTPS protocol</li>
    <li>Accessible from: <a href="https://installer.id.ee/media/killswitch/products.xml">https://installer.id.ee/media/killswitch/products.xml</a></li>
  </ul>
  <h3><a name="_Ref398569358"></a><a name="_DigiDocService_web_service"></a>DigiDocService web service interface </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: DigiDoc3 Client </li>
    <li>Accessible with: SOAP  1.0-encoded over HTTPS </li>
    <li>Accessible from: <a href="https://digidocservice.sk.ee/">https://digidocservice.sk.ee</a></li>
    <li>Documentation: <a href="http://www.sk.ee/upload/files/DigiDocService_spec_eng.pdf">http://www.sk.ee/upload/files/DigiDocService_spec_eng.pdf</a></li>
  </ul>
  <h3><a name="_Ref398569378"></a><a name="_Error_reports_repository"></a>Error reports repository interface </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: DigiDoc3 Client,  ID-utility </li>
    <li>Accessible with: HTTPS protocol</li>
    <li>Accessible from: <a href="https://cr.eesti.ee/">https://cr.eesti.ee</a></li>
  </ul>
  <h3><a name="_Ref398569441"></a><a name="_LDAP_directory_interface"></a>LDAP directory interface </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: DigiDoc3 Client </li>
    <li>Accessible with: LDAP protocol</li>
    <li>Accessible from: ldap.sk.ee:389 </li>
    <li>Documentation: <a href="https://sk.ee/en/repository/ldap/ldap-kataloogi-kasutamine/">https://sk.ee/en/repository/ldap/ldap-kataloogi-kasutamine/</a></li>
  </ul>
  <h3><a name="_Ref398627693"></a><a name="_TSL_repositories’_interfaces"></a>TSL repositories&rsquo; interfaces </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: Libdigidocpp, DigiDoc4j </li>
    <li>Accessible with: HTTPS protocol</li>
    <li>Accessible from:</li>
    <ul>
      <li>European Commission&rsquo;s master  list: <a href="https://ec.europa.eu/information_society/policy/esignature/trusted-list/tl-mp.xml">https://ec.europa.eu/information_society/policy/esignature/trusted-list/tl-mp.xml</a></li>
      <li>National TSL URLs in the  European Commission&rsquo;s TSL, e,g, Estonian TSL: <a href="http://sr.riik.ee/tsl/estonian-tsl.xml">http://sr.riik.ee/tsl/estonian-tsl.xml</a></li>
    </ul>
    <li>Documentation: <a href="http://www.etsi.org/deliver/etsi_ts/119600_119699/119612/01.02.01_60/ts_119612v010201p.pdf">http://www.etsi.org/deliver/etsi_ts/119600_119699/119612/01.02.01_60/ts_119612v010201p.pdf</a></li>
  </ul>
  <h3><a name="_Ref398627724"></a><a name="_Time-stamping_service_interface"></a>Time-stamping service interface </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: Libdigidocpp , DigiDoc4j </li>
    <li>Accessible with: HTTPS protocol</li>
    <li>Accessible from: </li>
    <ul>
      <li>SK&rsquo;s time-stamping service <a href="http://demo.sk.ee/tsa/">http://demo.sk.ee/tsa/</a></li>
    </ul>
    <li>Documentation: <a href="https://tools.ietf.org/html/rfc3161">RFC3161 </a></li>
  </ul>
  <h3><a name="_Ref398627748"></a><a name="_OCSP_service_interface"></a>OCSP service interface </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: DigiDoc4j, JDigiDoc,  Libdigidocpp, CDigiDoc software libraries; DigiDocService web service</li>
    <li>Accessible with: HTTPS protocol</li>
    <li>Accessible from: </li>
    <ul>
      <li>SK&rsquo;s OCSP service for SK issued  certificates: <a href="http://ocsp.sk.ee/">http://ocsp.sk.ee/</a></li>
      <li>SK&rsquo;s Proxy OCSP service for  international use: <a href="http://ocsp.sk.ee/_proxy">http://ocsp.sk.ee/_proxy</a></li>
      <li>SK&rsquo;s test OCSP service: <a href="http://demo.sk.ee/ocsp">http://demo.sk.ee/ocsp </a></li>
    </ul>
    <li>Documentation: <a href="https://tools.ietf.org/html/rfc6960">RFC6960 </a></li>
  </ul>
  <h3><a name="_Ref398626500"></a><a name="_ID-card_owners’_photo"></a>ID-card owners&rsquo; photo repository interface </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: ID-card utility program</li>
    <li>Accessible with: HTTPS protocol</li>
    <li>Accessible from: <a href="https://sisene.www.eesti.ee/idportaal/portaal.idpilt">https://sisene.www.eesti.ee/idportaal/portaal.idpilt</a></li>
  </ul>
  <h3><a name="_Ref398626512"></a><a name="_Certificate_renewal_service"></a>Certificate renewal service interface </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: ID-card utility program</li>
    <li>Accessible with: HTTP</li>
    <li>Accessible from: <a href="http://www.sk.ee/id-kontroll2/usk/">http://www.sk.ee:80/id-kontroll2/usk/</a></li>
  </ul>
  <h3><a name="_Ref398626581"></a><a name="_Eesti.ee_e-mail_checking"></a>Eesti.ee e-mail checking service interface </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: ID-card utility program</li>
    <li>Accessible with: HTTPS</li>
    <li>Accessible from: <a href="https://sisene.www.eesti.ee/idportaal/postisysteem.naita_suunamised">https://sisene.www.eesti.ee/idportaal/postisysteem.naita_suunamised</a></li>
  </ul>
  <h3><a name="_Ref398626603"></a><a name="_Mobile-ID_validity_checking"></a>Mobile-ID validity checking service interface </h3>
  <p>Interface&rsquo;s properties:</p>
  <ul>
    <li>User: ID-card utility program</li>
    <li>Accessible with: HTTPS</li>
    <li>Accessible from: <a href="https://id.sk.ee/MIDInfoWS/">https://id.sk.ee/MIDInfoWS/</a></li>
  </ul>
  <br clear="all">
  <p><strong>&nbsp;</strong></p>
  <h1><a name="_Toc423563532">Deployment  model</a></h1>
  <p>The following subchapters describe physical deployment  of ID-software components in collaboration with external components that were  depicted in chap. <a href="#_Component_model">Component model</a> in case of  the most common use cases.</p>
  <h2><a name="_Toc423563533"></a><a name="_Toc399176880"></a><a name="_Toc399176881"></a><a name="_Toc399176882"></a><a name="_Toc399176883"></a><a name="_Toc399176884"></a><a name="_Toc399176885"></a><a name="_Toc399176886"></a><a name="_Toc399176887"></a><a name="_Toc399176888"></a><a name="_Toc399176889"></a><a name="_Toc399176890"></a><a name="_Toc399176891"></a><a name="_Toc399176892"></a><a name="_Toc399176893"></a><a name="_Toc399176894"></a><a name="_Toc399176895"></a><a name="_Toc399176896"></a><a name="_Toc399176897"></a><a name="_Toc399176898"></a><a name="_Toc399176899"></a><a name="_Toc399176900"></a><a name="_Toc399176901"></a><a name="_Toc399176902"></a><a name="_Toc399176903"></a><a name="_Toc399176904"></a><a name="_Toc399176905"></a>Signing in web browser </h2>
  <p><img src="index_files/depl_web.png" width="643" height="673"><br>
    Figure 12. Signing in web browser via a web application<br>
    Additional  notes:</p>
  <ul>
    <li>A  DigiDoc software library (i.e. DigiDoc4j, JDigiDoc, Libdigidocpp or CDigiDoc  library) and DigiDocService web service are optional and can be used for creating  a DDOC or BDOC container and adding the created signature value to the  container. </li>
    <li>Long  term validation data is added to the DDOC/BDOC signature by obtaining OCSP  confirmation and optionally a time-stamp</li>
    <li>DigiDocService  is required in order to sign with Mobile-ID. </li>
    <li>Signature  value is calculated either in the Mobile-ID SIM card or eID-card&rsquo;s chip.</li>
    <li>When  signing with eID smartcard then the browser signing module is necessary for  enabling communication with the smart card connected to the user&rsquo;s system.  Hwcrypto.js library offers a single API for supporting signing modules of all  the supported browsers.  </li>
    <li>Optionally,  trust anchor data is retrieved from TSL lists – the European Commission&rsquo;s  central TSL and national TSL&rsquo;s of the EU member states.</li>
  </ul>
  <h2><a name="_Toc423563534">Signing with DigiDoc3 Client</a></h2>
  <p><a name="_Toc398633400"></a><a name="_Toc398590576"></a><a name="_Toc387845395"> </a>  </p>
  <p><img src="index_files/depl_client.png" width="651" height="590"><br>
    Figure 13. Deployment of components during signature creation with DigiDoc3  Client<br>
    Additional notes:</p>
  <ul>
    <li>DigiDoc3  Client is used for creating the DDOC or BDOC (XAdES/ASiC-E) container and  adding the signature value to the container. </li>
    <li>Long  term validation data is added to the DDOC/BDOC signature by obtaining OCSP  confirmation and optionally a time-stamp</li>
    <li>DigiDocService  is required in order to sign with Mobile-ID.</li>
    <li>Signature  value is calculated either in the Mobile-ID SIM card or ID-card&rsquo;s chip.</li>
    <li>Trust  anchor data is retrieved from TSL lists – the European Commission&rsquo;s central TSL  and national TSL&rsquo;s of the EU member states.</li>
  </ul>
  <p>&nbsp;</p>
</ul>
</body>
</html>
